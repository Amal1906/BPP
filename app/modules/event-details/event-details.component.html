<app-loader [isLoading]="isLoading"></app-loader>

<div class="loader-content">
  <div class="wrapper-main event-details">
    <div class="container-fluid">
      <div class="filter-data">
        <div class="search-controls">

          <!-- Search -->
          <div class="search-container">
            <input
              #InputVar
              type="text"
              class="search-input"
              placeholder="Search"
              (input)="onSearch($event)"
            />
          </div>

          <!-- Clear Button -->
          <button class="action-btn" matTooltip="Clear" (click)="reset()">
            <mat-icon>clear</mat-icon>
          </button>

          <!-- Refresh Button -->
          <button class="action-btn" matTooltip="Refresh" (click)="refresh()">
            <mat-icon>refresh</mat-icon>
          </button>

          <!-- ğŸ”¹ Client Dropdown -->
          <mat-form-field appearance="fill" class="client-select">
            <mat-label>Select Client</mat-label>
            <mat-select [(value)]="selectedClient" (selectionChange)="onClientChange()">
              <mat-option *ngFor="let client of clients" [value]="client">
                {{ client }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <!-- Date Picker -->
          <div class="date-picker-container">
            <mat-form-field>
              <mat-label>Enter a date range</mat-label>
              <mat-date-range-input [rangePicker]="picker" [formGroup]="dateRange" [max]="currentDate">
                <input matStartDate placeholder="Start date" formControlName="start" (dateInput)="handleDateChange()" required>
                <input matEndDate placeholder="End date" formControlName="end" (dateInput)="handleDateChange()" required>
              </mat-date-range-input>
              <button
                class="clear-date-btn"
                matIconSuffix
                *ngIf="dateRange.value.start || dateRange.value.end"
                (click)="clearDate()"
                style="margin-top: 10px;"
              >
                <mat-icon style="background-color: white;">clear</mat-icon>
              </button>
              <mat-datepicker-toggle matSuffix [for]="picker" (click)="clearDate()"></mat-datepicker-toggle>
              <mat-date-range-picker #picker></mat-date-range-picker>
            </mat-form-field>
          </div>
        </div>

        <!-- AG-Grid -->
        <div class="ag-grid-wrapper">
          <ag-grid-angular
            class="ag-theme-quartz"
            [columnDefs]="columnDefs"
            [rowData]="filteredRowData"
            [defaultColDef]="defaultColDef"
            [gridOptions]="gridOptions"
            [overlayNoRowsTemplate]="noRowsTemplate"
            (gridReady)="onGridReady($event)">
          </ag-grid-angular>
        </div>
      </div>
    </div>
  </div>
</div>
