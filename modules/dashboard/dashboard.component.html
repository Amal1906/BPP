<div class="ai-dashboard-container">
  <!-- Header Section -->
  <div class="dashboard-header fade-in">
    <div class="header-content">
      <h1 class="dashboard-title ai-gradient">
        <svg class="title-icon" width="32" height="32" viewBox="0 0 24 24" fill="none">
          <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
          <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
          <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
        </svg>
        AI Analytics Dashboard
      </h1>
      <p class="dashboard-subtitle">Real-time process monitoring and insights</p>
    </div>
  </div>

  <!-- Controls Section -->
  <div class="controls-section slide-in">
    <div class="controls-wrapper glass-effect">
      <div class="control-group">
        <label class="control-label">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M19 21V5C19 4.4 18.6 4 18 4H6C5.4 4 5 4.4 5 5V21L12 18L19 21Z" stroke="currentColor" stroke-width="2"/>
          </svg>
          Client Selection
        </label>
        <mat-form-field appearance="outline" class="ai-form-field">
          <mat-select [(value)]="selectedProject" (selectionChange)="onClientChange()" class="ai-select">
            <mat-option *ngFor="let project of projects" [value]="project" class="ai-option">
              <div class="option-content">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  <path d="M3 9L12 2L21 9V20C21 20.5 20.5 21 20 21H4C3.5 21 3 20.5 3 20V9Z" stroke="currentColor" stroke-width="2"/>
                </svg>
                {{project}}
              </div>
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="control-group">
        <label class="control-label">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
            <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2"/>
            <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2"/>
            <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
          </svg>
          Date Range
        </label>
        <div class="date-range-wrapper">
          <mat-form-field class="ai-form-field">
            <mat-date-range-input [rangePicker]="picker" [max]="maxDate">
              <input matStartDate [formControl]="startDateCtrl" placeholder="Start date" readonly>
              <input matEndDate [formControl]="endDateCtrl" placeholder="End date" readonly>
            </mat-date-range-input>
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-date-range-picker #picker (closed)="fetchDashboardData()"></mat-date-range-picker>
          </mat-form-field>
          <button *ngIf="startDateCtrl.value || endDateCtrl.value" 
                  class="clear-btn hover-glow" 
                  (click)="clearDateRange()" 
                  matTooltip="Clear Date Range">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2"/>
              <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container fade-in">
    <div class="ai-loader-wrapper">
      <div class="ai-loader"></div>
      <p class="loading-text">Analyzing data streams...</p>
    </div>
  </div>

  <!-- Dashboard Metrics -->
  <div class="metrics-grid" *ngIf="!loading">
    <div class="metric-card ai-card hover-glow fade-in" 
         *ngFor="let metric of metricsData; let i = index"
         [style.animation-delay]="(i * 0.1) + 's'"
         (click)="goToDetails(metric.type)" 
         style="cursor: pointer;">
      <div class="metric-header">
        <div class="metric-icon" [innerHTML]="metric.icon"></div>
        <h3 class="metric-title">{{metric.title}}</h3>
      </div>
      <div class="metric-value">
        <span class="value-number ai-gradient">{{metric.value}}</span>
        <div class="metric-trend" *ngIf="metric.trend">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" 
               [class.trend-up]="metric.trend > 0" 
               [class.trend-down]="metric.trend < 0">
            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" stroke="currentColor" stroke-width="2"/>
            <polyline points="17 6 23 6 23 12" stroke="currentColor" stroke-width="2"/>
          </svg>
          <span class="trend-value">{{metric.trend}}%</span>
        </div>
      </div>
      <div class="metric-description">{{metric.description}}</div>
    </div>
  </div>
</div>